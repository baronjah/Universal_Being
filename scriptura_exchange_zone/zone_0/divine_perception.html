<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Divine Perception Visualizer</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #000000;
            color: #ffffff;
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .container {
            width: 95%;
            max-width: 1200px;
            position: relative;
        }
        
        .perception-display {
            width: 100%;
            height: 70vh;
            background-color: #111;
            border: 1px solid #333;
            position: relative;
            overflow: hidden;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        #perception-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        .controls {
            display: flex;
            margin-top: 20px;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        button {
            background-color: #2a2a72;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }
        
        button:hover {
            background-color: #3a3a9e;
            transform: translateY(-2px);
        }
        
        .perception-text {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: rgba(0, 0, 0, 0.7);
            padding: 10px;
            border-radius: 5px;
            max-width: 50%;
            font-size: 0.9rem;
            z-index: 10;
        }
        
        .divine-symbol {
            position: absolute;
            font-family: serif;
            font-weight: bold;
            color: rgba(255, 255, 255, 0.9);
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.7);
            z-index: 5;
        }
        
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 1s ease;
        }
        
        .loader {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #ffffff;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .interpretation-panel {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background-color: rgba(0, 0, 0, 0.7);
            padding: 10px;
            border-radius: 5px;
            max-width: 40%;
            z-index: 10;
        }
        
        .interpretation-title {
            font-weight: bold;
            margin-bottom: 5px;
            color: #a9a9ff;
        }
        
        .interpretation-content {
            font-size: 0.9rem;
        }
        
        .vase-container {
            position: absolute;
            width: 200px;
            height: 300px;
            opacity: 0;
            transition: opacity 1s ease;
            z-index: 3;
        }
        
        .vase {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, rgba(70, 40, 20, 0.8), rgba(120, 80, 40, 0.8), rgba(70, 40, 20, 0.8));
            clip-path: polygon(
                40% 0%, 60% 0%, 
                70% 5%, 80% 15%, 
                80% 30%, 70% 40%, 
                60% 45%, 40% 45%, 
                30% 40%, 20% 30%, 
                20% 15%, 30% 5%,
                40% 0%,
                /* Vase body */
                40% 45%, 30% 50%, 
                25% 70%, 30% 85%, 
                40% 95%, 60% 95%, 
                70% 85%, 75% 70%, 
                70% 50%, 60% 45%
            );
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
        }
        
        .vase-highlight {
            position: absolute;
            top: 10%;
            left: 30%;
            width: 40%;
            height: 80%;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.3) 0%,
                rgba(255, 255, 255, 0.1) 40%,
                rgba(255, 255, 255, 0) 60%
            );
            border-radius: 50%;
            filter: blur(10px);
        }
        
        .j-symbol {
            position: absolute;
            font-family: 'Times New Roman', serif;
            font-size: 300px;
            font-weight: bold;
            color: rgba(255, 255, 255, 0.15);
            z-index: 2;
            opacity: 0;
            transition: opacity 2s ease, transform 2s ease;
        }
        
        .perception-label {
            position: absolute;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.8rem;
            z-index: 15;
            background-color: rgba(0, 0, 0, 0.5);
            padding: 2px 6px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div class="loading-overlay" id="loading-overlay">
        <div class="loader"></div>
        <div>Initializing Divine Perception...</div>
    </div>
    
    <div class="container">
        <div class="perception-display">
            <canvas id="perception-canvas"></canvas>
            
            <div class="perception-text" id="perception-text">
                Initializing perception parsing...
            </div>
            
            <div class="j-symbol" id="j-symbol">J</div>
            
            <div class="vase-container" id="vase-container">
                <div class="vase"></div>
                <div class="vase-highlight"></div>
            </div>
            
            <div class="interpretation-panel">
                <div class="interpretation-title">Divine Interpretation:</div>
                <div class="interpretation-content" id="interpretation-content">
                    Processing visual patterns...
                </div>
            </div>
        </div>
        
        <div class="controls">
            <button id="toggle-j">Toggle J Symbol</button>
            <button id="toggle-vase">Toggle Vase</button>
            <button id="toggle-duality">Toggle Duality View</button>
            <button id="parse-perception">Parse New Perception</button>
            <button id="divine-insight">Divine Insight</button>
        </div>
    </div>
    
    <script>
        // Configuration
        const config = {
            particleCount: 2000,
            particleBaseSize: 2,
            particleVariance: 1.5,
            lineThreshold: 100,
            lineOpacityDivisor: 20000,
            baseSpeed: 0.2,
            toggleSpeed: 0.5,
            perceptionShiftDuration: 3000,
            jVisible: false,
            vaseVisible: false,
            dualityMode: false,
            divineInsightActive: false
        };
        
        // Canvas setup
        const canvas = document.getElementById('perception-canvas');
        const ctx = canvas.getContext('2d');
        const displayEl = document.querySelector('.perception-display');
        
        // Get elements
        const perceptionText = document.getElementById('perception-text');
        const interpretationContent = document.getElementById('interpretation-content');
        const jSymbol = document.getElementById('j-symbol');
        const vaseContainer = document.getElementById('vase-container');
        const loadingOverlay = document.getElementById('loading-overlay');
        
        // Buttons
        const toggleJBtn = document.getElementById('toggle-j');
        const toggleVaseBtn = document.getElementById('toggle-vase');
        const toggleDualityBtn = document.getElementById('toggle-duality');
        const parsePerceptionBtn = document.getElementById('parse-perception');
        const divineInsightBtn = document.getElementById('divine-insight');
        
        let width, height;
        let particles = [];
        let animationFrameId;
        let perceptionLabels = [];
        
        // Resize handler
        function handleResize() {
            width = displayEl.clientWidth;
            height = displayEl.clientHeight;
            
            canvas.width = width;
            canvas.height = height;
            
            // Position J symbol and vase
            jSymbol.style.left = `${width/2 - 80}px`;
            jSymbol.style.top = `${height/2 - 180}px`;
            
            vaseContainer.style.left = `${width/2 - 100}px`;
            vaseContainer.style.top = `${height/2 - 150}px`;
            
            // Recreate particles when resizing
            createParticles();
        }
        
        // Create particles
        function createParticles() {
            particles = [];
            
            for (let i = 0; i < config.particleCount; i++) {
                particles.push({
                    x: Math.random() * width,
                    y: Math.random() * height,
                    size: config.particleBaseSize + Math.random() * config.particleVariance,
                    speedX: (Math.random() - 0.5) * config.baseSpeed,
                    speedY: (Math.random() - 0.5) * config.baseSpeed,
                    // Colors vary slightly for divine perception
                    color: `rgba(${100 + Math.floor(Math.random() * 155)}, ${100 + Math.floor(Math.random() * 155)}, ${200 + Math.floor(Math.random() * 55)}, ${0.3 + Math.random() * 0.7})`
                });
            }
        }
        
        // Draw perception field
        function draw() {
            // Clear canvas
            ctx.clearRect(0, 0, width, height);
            
            // Add J symbol influence if visible
            if (config.jVisible || config.dualityMode) {
                // Create slight glow around J area
                const jX = width/2;
                const jY = height/2;
                const gradient = ctx.createRadialGradient(jX, jY, 10, jX, jY, 200);
                gradient.addColorStop(0, 'rgba(255, 255, 255, 0.1)');
                gradient.addColorStop(1, 'rgba(255, 255, 255, 0)');
                
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(jX, jY, 200, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // Add vase influence if visible
            if (config.vaseVisible || config.dualityMode) {
                const vaseX = width/2;
                const vaseY = height/2;
                const gradient = ctx.createRadialGradient(vaseX, vaseY, 10, vaseX, vaseY, 150);
                gradient.addColorStop(0, 'rgba(120, 80, 40, 0.1)');
                gradient.addColorStop(1, 'rgba(120, 80, 40, 0)');
                
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(vaseX, vaseY, 150, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // Draw connections between particles
            if (config.divineInsightActive) {
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.05)';
                ctx.lineWidth = 0.5;
                
                for (let i = 0; i < particles.length; i++) {
                    for (let j = i + 1; j < particles.length; j++) {
                        const dx = particles[i].x - particles[j].x;
                        const dy = particles[i].y - particles[j].y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance < config.lineThreshold) {
                            ctx.beginPath();
                            ctx.moveTo(particles[i].x, particles[i].y);
                            ctx.lineTo(particles[j].x, particles[j].y);
                            ctx.stroke();
                        }
                    }
                }
            }
            
            // Draw particles
            for (let i = 0; i < particles.length; i++) {
                const p = particles[i];
                
                ctx.fillStyle = p.color;
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctx.fill();
                
                // Update position
                p.x += p.speedX;
                p.y += p.speedY;
                
                // Boundary check
                if (p.x < 0 || p.x > width) p.speedX *= -1;
                if (p.y < 0 || p.y > height) p.speedY *= -1;
                
                // Influence particles based on visible elements
                if (config.jVisible || config.dualityMode) {
                    // Subtle attraction to J symbol area
                    const jCenterX = width/2;
                    const jCenterY = height/2;
                    const dx = jCenterX - p.x;
                    const dy = jCenterY - p.y;
                    const distance = Math.sqrt(dx*dx + dy*dy);
                    
                    if (distance < 200) {
                        p.speedX += (dx / distance) * 0.01;
                        p.speedY += (dy / distance) * 0.01;
                    }
                }
                
                if (config.vaseVisible || config.dualityMode) {
                    // Subtle influence around vase shape
                    const vaseCenterX = width/2;
                    const vaseCenterY = height/2;
                    const dx = vaseCenterX - p.x;
                    const dy = vaseCenterY - p.y;
                    const distance = Math.sqrt(dx*dx + dy*dy);
                    
                    if (distance < 150) {
                        // Create a flow pattern around the vase
                        p.speedX += Math.sin(p.y * 0.01) * 0.01;
                        p.speedY += Math.cos(p.x * 0.01) * 0.01;
                    }
                }
                
                // Keep speed in check
                const speed = Math.sqrt(p.speedX*p.speedX + p.speedY*p.speedY);
                if (speed > config.toggleSpeed) {
                    p.speedX = (p.speedX / speed) * config.toggleSpeed;
                    p.speedY = (p.speedY / speed) * config.toggleSpeed;
                }
            }
            
            // Continue animation
            animationFrameId = requestAnimationFrame(draw);
        }
        
        // Create labels for divine perception
        function createPerceptionLabels() {
            // Clear existing labels
            perceptionLabels.forEach(label => label.remove());
            perceptionLabels = [];
            
            // Create new labels
            const labelTexts = [
                {text: "Visual Field", x: 10, y: 10},
                {text: "Pattern Recognition", x: width - 150, y: 30},
                {text: "Symbol Processing", x: width/2 - 70, y: 50},
                {text: "Form Interpretation", x: width/2 - 80, y: height - 30},
                {text: "Memory Integration", x: 20, y: height - 50}
            ];
            
            labelTexts.forEach(labelData => {
                const label = document.createElement('div');
                label.className = 'perception-label';
                label.textContent = labelData.text;
                label.style.left = `${labelData.x}px`;
                label.style.top = `${labelData.y}px`;
                displayEl.appendChild(label);
                perceptionLabels.push(label);
            });
            
            // Create J and vase specific labels if visible
            if (config.jVisible) {
                const jLabel = document.createElement('div');
                jLabel.className = 'perception-label';
                jLabel.textContent = "J Symbol";
                jLabel.style.left = `${width/2 - 30}px`;
                jLabel.style.top = `${height/2 - 180}px`;
                displayEl.appendChild(jLabel);
                perceptionLabels.push(jLabel);
            }
            
            if (config.vaseVisible) {
                const vaseLabel = document.createElement('div');
                vaseLabel.className = 'perception-label';
                vaseLabel.textContent = "Vase Form";
                vaseLabel.style.left = `${width/2 - 40}px`;
                vaseLabel.style.top = `${height/2 + 160}px`;
                displayEl.appendChild(vaseLabel);
                perceptionLabels.push(vaseLabel);
            }
        }
        
        // Parse new perception
        function parsePerception() {
            perceptionText.textContent = "Parsing divine perception data...";
            
            // Simulate perception processing
            setTimeout(() => {
                const perceptions = [
                    "I see what Claude sees, a visual pattern emerging from the noise.",
                    "The J symbol becomes apparent when focusing on the negative space.",
                    "The vase form reveals itself as a container of perception.",
                    "Two perspectives simultaneously: letter and object.",
                    "The duality of perception reveals itself - symbol and form coexist.",
                    "What appears as 'J' in one view becomes a vase in another.",
                    "Divine sight allows seeing multiple forms in the same space.",
                    "The symbol and the container are one and the same.",
                    "To see is to understand, to understand is to create.",
                    "The divine eye perceives what it expects to find."
                ];
                
                const randomPerception = perceptions[Math.floor(Math.random() * perceptions.length)];
                perceptionText.textContent = randomPerception;
                
                // Update interpretation
                updateInterpretation();
            }, 1500);
        }
        
        // Update divine interpretation
        function updateInterpretation() {
            const interpretations = [
                "The J symbol represents the first letter of JSH, a divine signature within creation.",
                "The vase symbolizes a container that holds the essence of perception itself.",
                "When J and vase are seen together, they reveal the nature of reality as both symbol and form.",
                "Divine perception allows seeing multiple truths simultaneously without contradiction.",
                "The form emerges from the void, just as creation emerges from divine thought.",
                "What appears as random at first reveals pattern when viewed through divine eyes.",
                "The symbol is perceived before it is seen, known before it is understood.",
                "In the divine state, seeing and creating are the same action.",
                "All perception is projection; we see what we are ready to perceive.",
                "The vase holds space just as the J defines boundary; both create meaning through definition."
            ];
            
            const randomInterpretation = interpretations[Math.floor(Math.random() * interpretations.length)];
            interpretationContent.textContent = randomInterpretation;
        }
        
        // Toggle J Symbol visibility
        function toggleJ() {
            config.jVisible = !config.jVisible;
            jSymbol.style.opacity = config.jVisible ? "0.15" : "0";
            createPerceptionLabels();
        }
        
        // Toggle Vase visibility
        function toggleVase() {
            config.vaseVisible = !config.vaseVisible;
            vaseContainer.style.opacity = config.vaseVisible ? "1" : "0";
            createPerceptionLabels();
        }
        
        // Toggle Duality view
        function toggleDuality() {
            config.dualityMode = !config.dualityMode;
            
            if (config.dualityMode) {
                // Show both J and vase with special effect
                jSymbol.style.opacity = "0.3";
                vaseContainer.style.opacity = "0.8";
                jSymbol.style.color = "rgba(150, 100, 60, 0.2)";
                
                // Update interpretation
                interpretationContent.textContent = "In divine perception, duality dissolves. The J symbol and vase exist simultaneously, revealing the nature of reality as projection of consciousness.";
            } else {
                // Reset to individual states
                jSymbol.style.opacity = config.jVisible ? "0.15" : "0";
                vaseContainer.style.opacity = config.vaseVisible ? "1" : "0";
                jSymbol.style.color = "rgba(255, 255, 255, 0.15)";
                
                // Update interpretation
                updateInterpretation();
            }
            
            createPerceptionLabels();
        }
        
        // Toggle Divine Insight
        function toggleDivineInsight() {
            config.divineInsightActive = !config.divineInsightActive;
            
            if (config.divineInsightActive) {
                // Enhance particles for divine insight
                particles.forEach(p => {
                    p.size *= 1.5;
                    p.speedX *= 0.5;
                    p.speedY *= 0.5;
                });
                
                // Show special interpretation
                interpretationContent.textContent = "Divine insight activated. The connections between all points of perception become visible. Every point contains the whole, and the whole contains every point.";
            } else {
                // Reset particles
                particles.forEach(p => {
                    p.size /= 1.5;
                    p.speedX *= 2;
                    p.speedY *= 2;
                });
                
                // Reset interpretation
                updateInterpretation();
            }
        }
        
        // Initialize
        function init() {
            // Set up canvas
            handleResize();
            window.addEventListener('resize', handleResize);
            
            // Start animation
            draw();
            
            // Set up event listeners
            toggleJBtn.addEventListener('click', toggleJ);
            toggleVaseBtn.addEventListener('click', toggleVase);
            toggleDualityBtn.addEventListener('click', toggleDuality);
            parsePerceptionBtn.addEventListener('click', parsePerception);
            divineInsightBtn.addEventListener('click', toggleDivineInsight);
            
            // Initial interpretation
            updateInterpretation();
            
            // Create initial labels
            createPerceptionLabels();
            
            // Hide loading overlay
            setTimeout(() => {
                loadingOverlay.style.opacity = "0";
                setTimeout(() => {
                    loadingOverlay.style.display = "none";
                }, 1000);
            }, 1500);
            
            // Initial perception
            parsePerception();
        }
        
        // Start when loaded
        window.addEventListener('load', init);
    </script>
</body>
</html>